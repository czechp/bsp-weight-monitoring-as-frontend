<div class="container">
  <div class="container-column">
    <div class="container-item">
      <p class="key">Linia</p>
      <p class="value" title="Nazwa linii produkcyjnej">{{ report.lineName }}</p>
    </div>
    <div class="container-item">
      <p class="key">Zmiana</p>
      <p class="value" title="Numer zmiany produkcyjnej">{{ report.reportShift }}</p>
    </div>
    <div class="container-item">
      <p class="key">Produkt</p>
      <p class="value" title="Nazwa produktu">{{ report.product.productName }}</p>
    </div>
  </div>
  <div class="container-column">
    <div class="container-item">
      <p class="key">Waga OK</p>
      <p class="value" title="Referencyjna waga produktu">{{ report.product.productCorrectWeight | ZeroDigits }} g</p>
    </div>
    <div class="container-item">
      <p class="key">Waga min.</p>
      <p class="value" title="Minimalna dopuszczalna waga produktu">{{ report.product.productMinimumWeight | ZeroDigits }} g</p>
    </div>
    <div class="container-item">
      <p class="key">Waga max.</p>
      <p class="value" title="Maksymalna dopuszczalna waga produktu">{{ report.product.productMaximumWeight | ZeroDigits }} g</p>
    </div>
  </div>
  <div class="container-column">
    <div class="container-item">
      <p class="key">Wyskość kubka</p>
      <p class="value" title="Wysokość kubka produktu">{{ report.product.cupHeight | ZeroDigits }} mm</p>
    </div>
    <div class="container-item">
      <p class="key">Średnica kubka</p>
      <p class="value" title="Średnica kubka produktu">{{ report.product.cupDiameter.toFixed(1) }} mm</p>
    </div>
    <div class="container-item">
      <p class="key">Waga kubka</p>
      <p class="value" title="Waga pustego kubka">{{ report.product.cupWeight.toFixed(1) }} g</p>
    </div>
  </div>
  <div class="container-column">
    <div class="container-item">
      <p class="key">Status</p>
      <p class="value" title="Status raportu">{{ report.reportOpen ? 'Otwarty' : 'Zamknięty' }}</p>
    </div>
    <div class="container-item">
      <p class="key">Data rozpoczęcia</p>
      <p class="value" title="Data rozpoczęcia raportu">{{ report.startAt | localDateTime }}</p>
    </div>
    <div class="container-item">
      <p class="key">Data zamknięcia</p>
      <p class="value" title="Data zamknięcia raportu">{{ report.closedAt | localDateTime }}</p>
    </div>
  </div>
</div>
<hr>
<app-production-efficiency-chart [reportItems]="report.reportItems" />
<hr>
<app-weight-correctness-chart [product]="report.product"  [reportItems]="report.reportItems" />
<hr>
<div class="" *ngFor="let reportItem of report.reportItems">
  <h2>Pomiary wagi</h2>
  <div class="measurement-row">
    <div class="measurement-row-content">
      <div class="container-item">
        <p class="key">Średni pomiar godzinowy</p>
        <p class="value" title="Średnia waga z średnich pomiarów z ostatniej godziny">{{ reportItem.averageOfAverageLastHour | ZeroDigits }} g</p>
      </div>
      <div class="container-item">
        <p class="key">Odchyłka</p>
        <p class="value"
           [ngClass]="{'measurement-ok': reportItem.weightCorrect, 'measurement-nok': !reportItem.weightCorrect}"
           title="Odchylenie średniej z ostatniej goodziny od referencyjnej wagi">{{ reportItem.averageOfAverageLastHourDeviation | ZeroDigits }} g</p>
      </div>
    </div>
    <div class="measurement-row-icon">
      <fa-icon *ngIf="reportItem.weightCorrect" icon="check" size="3x" class="measurement-ok"/>
      <fa-icon *ngIf="!reportItem.weightCorrect" icon="xmark" size="3x" class="measurement-nok"/>
    </div>
  </div>
  <div class="measurement-container">
    <div class="measurement-time">
      <div class="">
        <p class="key">Zakres godzinowy</p>
        <p class="value" title="Zakres godzinowy wykonania pomiaru">
          {{ reportItem.createdAt | localTimeMinusHour }}
          <br>---<br>
          {{ reportItem.createdAt | localTime }}
        </p>
      </div>
    </div>
    <app-measurement-tile style="width: 20rem" *ngFor="let measurement of reportItem.measurements"
                         [measurement]="measurement"
                         [product]="report.product"></app-measurement-tile>
  </div>
  <h2>Alerty</h2>
  <app-alerts-table  *ngIf="reportItem.alerts.length > 0" [alerts]="reportItem.alerts" />
  <hr>
</div>
